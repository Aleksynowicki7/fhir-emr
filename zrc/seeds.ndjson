{"resourceType": "Mapping", "id": "practitioner-role-create", "body": {"resourceType": "Bundle", "type": "transaction", "entry": [{"request": {"url": "/PractitionerRole", "method": "POST"}, "resource": {"resourceType": "PractitionerRole", "organization": {"uri": "urn:uuid:organization-id"}, "practitioner": {"uri": "urn:uuid:practioner-id-1"}, "specialty": [{"coding": [{"code": "394579002", "display": "\u041a\u0430\u0440\u0434\u0438\u043e\u043b\u043e\u0433", "system": "http://hl7.org/fhir/ValueSet/c80-practice-codes"}]}]}}]}}
{"resourceType": "Mapping", "id": "test", "body": {"resourceType": "Bundle", "type": "transaction"}}
{"resourceType": "Mapping", "id": "encounter-create", "body": {"resourceType": "Bundle", "type": "transaction", "entry": [{"request": {"url": "/Encounter", "method": "POST"}, "resource": {"resourceType": "Encounter", "status": "planned", "subject": {"uri": "ref to patient"}, "class": {"code": "AMB"}, "serviceProvider": "ref to organization", "participant": [{"individual": {"uri": "ref to practitioner"}}], "period": {"start": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='date-time').answer.value.dateTime\").0"}, "serviceType": {"coding": "coding of service"}}}]}}
{"resourceType": "Mapping", "id": "seeds", "scopeSchema": {"type": "object", "required": ["organizationName"], "properties": {"type": "string"}}, "body": {"resourceType": "Bundle", "type": "transaction", "entry": [{"request": {"url": "/Organization", "method": "POST"}, "resource": {"resourceType": "Organization", "name": "$ organizationName"}, "fullUrl": "urn:uuid:organization-id"}, {"request": {"url": "/Practitioner", "method": "POST"}, "resource": {"resourceType": "Practitioner", "name": [{"family": "\u041b\u0438\u0441\u043e\u0432", "given": ["\u041c\u0438\u0445\u0430\u0438\u043b", "\u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432\u0438\u0447"]}]}, "fullUrl": "urn:uuid:practioner-id-1"}, {"request": {"url": "/PractitionerRole", "method": "POST"}, "resource": {"resourceType": "PractitionerRole", "organization": {"uri": "urn:uuid:organization-id"}, "practitioner": {"uri": "urn:uuid:practioner-id-1"}, "specialty": [{"coding": [{"code": "394579002", "display": "\u041a\u0430\u0440\u0434\u0438\u043e\u043b\u043e\u0433", "system": "http://hl7.org/fhir/ValueSet/c80-practice-codes"}]}]}}, {"request": {"url": "/Practitioner", "method": "POST"}, "resource": {"resourceType": "Practitioner", "name": [{"family": "\u041c\u043e\u0440\u043e\u0437\u043e\u0432", "given": ["\u0414\u043c\u0438\u0442\u0440\u0438\u0439", "\u0410\u043d\u0434\u0440\u0435\u0435\u0432\u0438\u0447"]}]}, "fullUrl": "urn:uuid:practioner-id-2"}, {"request": {"url": "/PractitionerRole", "method": "POST"}, "resource": {"resourceType": "PractitionerRole", "organization": {"uri": "urn:uuid:organization-id"}, "practitioner": {"uri": "urn:uuid:practioner-id-2"}, "specialty": [{"coding": [{"code": "408466002", "display": "\u0421\u0435\u0440\u0434\u0435\u0447\u043d\u043e-\u0441\u043e\u0441\u0443\u0434\u0438\u0441\u0442\u044b\u0439 \u0445\u0438\u0440\u0443\u0440\u0433", "system": "http://hl7.org/fhir/ValueSet/c80-practice-codes"}]}]}}, {"request": {"url": "/Patient", "method": "POST"}, "resource": {"resourceType": "Patient", "gender": "female", "name": [{"family": "\u0420\u0443\u043c\u044f\u043d\u0446\u0435\u0432\u0430", "given": ["\u0412\u0430\u0441\u0438\u043b\u0438\u0441\u0430", "\u0410\u043d\u0434\u0440\u0435\u0435\u0432\u043d\u0430"]}], "birthDate": "1970-06-07", "managingOrganization": {"uri": "urn:uuid:organization-id"}, "telecom": [{"system": "phone", "use": "mobile", "value": "+79787787671"}], "identifier": [{"system": "1.2.643.100.3", "value": "254-636-254 26"}]}, "fullUrl": "urn:uuid:patient-id-1"}, {"request": {"url": "/Encounter", "method": "POST"}, "resource": {"resourceType": "Encounter", "status": "planned", "subject": {"uri": "urn:uuid:patient-id-1"}, "class": {"code": "AMB"}, "serviceProvider": {"uri": "urn:uuid:organization-id"}, "participant": [{"individual": {"uri": "urn:uuid:practitioner-id-1"}}], "period": {"start": "2021-12-17T08:00:00Z"}, "serviceType": {"coding": [{"code": "cardiology-consultation-primary", "display": "\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f \u043a\u0430\u0440\u0434\u0438\u043e\u043b\u043e\u0433\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f", "system": "urn:service-type"}]}}, "fullUrl": "urn:uuid:encounter-id-11"}, {"request": {"url": "/Encounter", "method": "POST"}, "resource": {"resourceType": "Encounter", "status": "finished", "subject": {"uri": "urn:uuid:patient-id-1"}, "serviceProvider": {"uri": "urn:uuid:organization-id"}, "participant": [{"individual": {"uri": "urn:uuid:practitioner-id-1"}}], "class": {"code": "AMB"}, "period": {"start": "2021-12-17T14:00:00Z", "end": "2021-12-17T14:30:00Z"}, "serviceType": {"coding": [{"code": "cardiology-consultation-primary", "display": "\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f \u043a\u0430\u0440\u0434\u0438\u043e\u043b\u043e\u0433\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f", "system": "urn:service-type"}]}}, "fullUrl": "urn:uuid:encounter-id-12"}, {"request": {"url": "/Patient", "method": "POST"}, "resource": {"resourceType": "Patient", "gender": "male", "name": [{"family": "\u041f\u0435\u0442\u0440\u043e\u0432", "given": ["\u0418\u0432\u0430\u043d", "\u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0438\u0447"]}], "birthDate": "1976-04-12", "managingOrganization": {"uri": "urn:uuid:organization-id"}, "telecom": [{"system": "phone", "use": "mobile", "value": "+79997787671"}], "identifier": [{"system": "1.2.643.100.3", "value": "455-636-254 01"}]}, "fullUrl": "urn:uuid:patient-id-2"}, {"request": {"url": "/Encounter", "method": "POST"}, "resource": {"resourceType": "Encounter", "status": "planned", "subject": {"uri": "urn:uuid:patient-id-2"}, "serviceProvider": {"uri": "urn:uuid:organization-id"}, "class": {"code": "AMB"}, "participant": [{"individual": {"uri": "urn:uuid:practitioner-id-2"}}], "period": {"start": "2021-12-17T08:00:00Z"}, "serviceType": {"coding": [{"code": "cardiology-consultation-primary", "display": "\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f \u043a\u0430\u0440\u0434\u0438\u043e\u043b\u043e\u0433\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f", "system": "urn:service-type"}]}}, "fullUrl": "urn:uuid:encounter-id-21"}, {"request": {"url": "/Encounter", "method": "POST"}, "resource": {"resourceType": "Encounter", "status": "finished", "subject": {"uri": "urn:uuid:patient-id-2"}, "serviceProvider": {"uri": "urn:uuid:organization-id"}, "participant": [{"individual": {"uri": "urn:uuid:practitioner-id-2"}}], "class": {"code": "AMB"}, "period": {"start": "2021-12-17T14:00:00Z", "end": "2021-12-17T14:30:00Z"}, "serviceType": {"coding": [{"code": "cardiology-consultation-primary", "display": "\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f \u043a\u0430\u0440\u0434\u0438\u043e\u043b\u043e\u0433\u0430 \u043f\u0435\u0440\u0432\u0438\u0447\u043d\u0430\u044f", "system": "urn:service-type"}]}}, "fullUrl": "urn:uuid:encounter-id-22"}]}}
{"resourceType": "Mapping", "id": "patient-create", "body": {"$let": {"patientId": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='patient-id').answer.value.string\").0", "firstName": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='first-name').answer.value.string\").0", "middleName": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='middle-name').answer.value.string\").0", "lastName": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='last-name').answer.value.string\").0", "birthDate": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='birth-date').answer.value.date\").0", "gender": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='gender').answer.value.string\").0", "snils": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='snils').answer.value.string\").0", "mobile": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='mobile').answer.value.string\").0"}, "$body": {"resourceType": "Bundle", "type": "transaction", "entry": [{"request": {"$if": "$ patientId", "$then": {"url": "$ \"/Patient/\" + patientId", "method": "PUT"}, "$else": {"url": "/Patient", "method": "POST"}}, "resource": {"resourceType": "Patient", "identifier": [{"system": "1.2.643.100.3", "value": "$ snils"}], "telecom": [{"system": "mobile", "value": "$ mobile"}], "name": [{"given": ["$ firstName", "$ middleName"], "family": "$ lastName"}], "birthDate": "$ birthDate", "gender": "$ gender"}}]}}}
{"resourceType": "Mapping", "id": "practitioner-create", "body": {"resourceType": "Bundle", "type": "transaction", "entry": [{"request": {"url": "/Practitioner", "method": "POST"}, "resource": {"resourceType": "Practitioner", "name": [{"given": ["$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='first-name').answer.value.string\").0", "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='middle-name').answer.value.string\").0"], "family": "$ fhirpath(\"QuestionnaireResponse.repeat(item).where(linkId='last-name').answer.value.string\").0"}]}}]}}
{"id": "practitioner-role-create", "resourceType": "Questionnaire", "name": "practitioner-role-create", "title": "\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430", "status": "active", "mapping": [{"id": "practitioner-role-create", "resourceType": "Mapping"}], "item": [{"linkId": "organization", "type": "string", "text": "Organization"}, {"linkId": "practitioner", "type": "string", "text": "\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442"}, {"linkId": "specialty", "type": "string", "text": "\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"}]}
{"id": "test", "resourceType": "Questionnaire", "status": "active", "item": [{"type": "decimal", "linkId": "test", "text": "base"}, {"type": "decimal", "linkId": "test2", "text": "double", "calculatedExpression": {"language": "text/fhirpath", "expression": "%QuestionnaireResponse.repeat(item).where(linkId='test').answer.children().decimal * 2"}}]}
{"id": "encounter-create", "resourceType": "Questionnaire", "name": "encounter-create", "title": "\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u0435\u043c\u0430", "status": "active", "mapping": [{"id": "encounter-create", "resourceType": "Mapping"}], "item": [{"linkId": "organization", "type": "string", "text": "Organization"}, {"linkId": "patient", "type": "string", "text": "\u041f\u0430\u0446\u0438\u0435\u043d\u0442"}, {"linkId": "practitioner", "type": "string", "text": "\u0412\u0440\u0430\u0447"}, {"linkId": "service", "type": "string", "text": "\u0423\u0441\u043b\u0443\u0433\u0430"}, {"linkId": "date-time", "type": "dateTime", "text": "\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"}]}
{"id": "patient-edit", "resourceType": "Questionnaire", "name": "\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0446\u0438\u0435\u043d\u0442\u0430", "title": "\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0446\u0438\u0435\u043d\u0442\u0430", "status": "active", "launchContext": [{"name": "Patient", "type": "Patient"}], "mapping": [{"id": "patient-create", "resourceType": "Mapping"}], "item": [{"linkId": "patient-id", "type": "string", "text": "patientId", "readOnly": true, "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.id"}}, {"linkId": "last-name", "type": "string", "text": "\u0424\u0430\u043c\u0438\u043b\u0438\u044f", "required": true, "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.name.family"}}, {"linkId": "first-name", "type": "string", "text": "\u0418\u043c\u044f", "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.name.given[0]"}}, {"linkId": "middle-name", "type": "string", "text": "\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e", "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.name.given[1]"}}, {"linkId": "birth-date", "type": "date", "text": "\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f", "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.birthDate"}}, {"linkId": "gender", "type": "choice", "text": "\u041f\u043e\u043b", "answerOption": [{"value": {"string": "male"}}, {"value": {"string": "female"}}], "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.gender"}}, {"linkId": "snils", "type": "string", "text": "\u0421\u041d\u0418\u041b\u0421", "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.identifier.where(system='1.2.643.100.3').value"}}, {"linkId": "mobile", "type": "string", "text": "\u0422\u0435\u043b\u0435\u0444\u043e\u043d", "initialExpression": {"language": "text/fhirpath", "expression": "%Patient.telecom.where(system='mobile').value"}}]}
{"id": "patient-create", "resourceType": "Questionnaire", "name": "patient-create", "title": "\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0430\u0446\u0438\u0435\u043d\u0442\u0430", "status": "active", "mapping": [{"id": "patient-create", "resourceType": "Mapping"}], "item": [{"linkId": "patient-id", "type": "string", "text": "patientId", "hidden": true}, {"linkId": "last-name", "type": "string", "text": "\u0424\u0430\u043c\u0438\u043b\u0438\u044f", "required": true}, {"linkId": "first-name", "type": "string", "text": "\u0418\u043c\u044f"}, {"linkId": "middle-name", "type": "string", "text": "\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}, {"linkId": "birth-date", "type": "date", "text": "\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"}, {"linkId": "gender", "type": "choice", "text": "\u041f\u043e\u043b", "answerOption": [{"value": {"string": "male"}}, {"value": {"string": "female"}}]}, {"linkId": "snils", "type": "string", "text": "\u0421\u041d\u0418\u041b\u0421"}, {"linkId": "mobile", "type": "string", "text": "\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}]}
{"id": "practitioner-create", "resourceType": "Questionnaire", "name": "\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430", "title": "\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430", "status": "active", "mapping": [{"id": "practitioner-create", "resourceType": "Mapping"}], "item": [{"linkId": "last-name", "type": "string", "text": "\u0424\u0430\u043c\u0438\u043b\u0438\u044f", "required": true}, {"linkId": "first-name", "type": "string", "text": "\u0418\u043c\u044f"}, {"linkId": "middle-name", "type": "string", "text": "\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}]}
{"id": "cardiology-example", "resourceType": "Questionnaire", "name": "cardiology-example", "title": "\u041a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f \u043a\u0430\u0440\u0434\u0438\u043e\u043b\u043e\u0433\u0430", "status": "active", "mapping": [{"id": "encounter-create", "resourceType": "Mapping"}], "item": [{"linkId": "complaints", "type": "text", "text": "\u0416\u0430\u043b\u043e\u0431\u044b"}, {"linkId": "examination-objective", "type": "text", "text": "\u041e\u0431\u044a\u0435\u043a\u0442\u0438\u0432\u043d\u043e"}, {"linkId": "observations-data", "type": "text", "text": "\u0414\u0430\u043d\u043d\u044b\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0431\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0439"}, {"linkId": "lab-data", "type": "text", "text": "\u0414\u0430\u043d\u043d\u044b\u0435 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0445 \u043e\u0431\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0439"}, {"linkId": "group-ds", "type": "group", "text": "\u0414\u0438\u0430\u0433\u043d\u043e\u0437", "item": [{"linkId": "ds-main", "type": "group", "text": "\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439", "item": [{"linkId": "ds-main-icd-10", "type": "choice", "text": "\u041c\u041a\u0411-10", "answerOption": [{"value": {"Coding": {"system": "http://hl7.org/fhir/sid/icd-10", "code": "i-20", "display": "I20 \u0421\u0442\u0435\u043d\u043e\u043a\u0430\u0440\u0434\u0438\u044f [\u0433\u0440\u0443\u0434\u043d\u0430\u044f \u0436\u0430\u0431\u0430]"}}}, {"value": {"Coding": {"system": "http://hl7.org/fhir/sid/icd-10", "code": "i-21", "display": "I21 \u041e\u0441\u0442\u0440\u044b\u0439 \u0438\u043d\u0444\u0430\u0440\u043a\u0442 \u043c\u0438\u043e\u043a\u0430\u0440\u0434\u0430"}}}, {"value": {"Coding": {"system": "http://hl7.org/fhir/sid/icd-10", "code": "i-25", "display": "I25 \u0425\u0440\u043e\u043d\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0438\u0448\u0435\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0431\u043e\u043b\u0435\u0437\u043d\u044c \u0441\u0435\u0440\u0434\u0446\u0430"}}}]}, {"linkId": "ds-main-text", "type": "text", "text": "\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}]}, {"linkId": "ds-supplimentary", "type": "text", "text": "\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439"}, {"linkId": "ds-add", "type": "text", "text": "\u0421\u043e\u043f\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439"}, {"linkId": "ds-background", "type": "text", "text": "\u0424\u043e\u043d\u043e\u0432\u044b\u0439"}]}]}