id: encounter-create
resourceType: Questionnaire
title: Encounter create
status: active
mapping:
    - id: encounter-create-extract
      resourceType: Mapping
launchContext:
    - name: Patient
      type: Patient
name: encounter-create
item:
    - text: PatientId
      type: string
      linkId: patientId
      hidden: true
      initialExpression:
          language: text/fhirpath
          expression: '%Patient.id'
    - text: PatientName
      type: string
      linkId: patientName
      readOnly: true
      initialExpression:
          language: text/fhirpath
          expression: "%Patient.name.given[0] + ' ' + %Patient.name.family"
    - text: Practitioner
      type: reference
      referenceResource:
          - PractitionerRole
      required: true
      linkId: practitioner-role
      answerExpression:
          language: application/x-fhir-query
          expression: 'PractitionerRole?_assoc=practitioner'
      choiceColumn:
          - forDisplay: true
            path: >-
                practitioner.resource.name.given.first() + ' ' +
                practitioner.resource.name.family + ' - ' + specialty.first().coding.display
    - text: Service
      type: choice
      linkId: service
      repeats: false
      answerOption:
          - value:
                Coding:
                    code: HH
                    system: http://terminology.hl7.org/CodeSystem/v3-ActCode
                    display: home health
          - value:
                Coding:
                    code: AMB
                    system: http://terminology.hl7.org/CodeSystem/v3-ActCode
                    display: ambulatory
    - text: Date
      type: date
      linkId: date
    - text: Time
      type: group
      linkId: Time period
      itemControl:
          coding:
              - code: time-range-picker
      item:
          - type: time
            linkId: start-time
          - type: time
            linkId: end-time
